# Mini CRM on Laravel 11

Простая CRM-система для управления лидами и задачами. Разработана в рамках тестового задания.

## Стек технологий
- **PHP 8.2+**
- **Laravel 11**
- **MySQL / PostgreSQL**
- **Breeze** (Authentication)
- **Stisla Admin Template** (Bootstrap 4)

## Функционал
- Авторизация пользователей (Регистрация / Вход).
- Полный CRUD лидов (Создание, Просмотр, Редактирование, Удаление).
- Автоматическая привязка лида к создателю (`assigned_to` устанавливается текущим пользователем).
- Безопасность: пользователь видит, редактирует и удаляет только свои лиды (реализовано через Laravel Policies).
- Поиск лидов по имени и телефону, фильтрация по статусу на главной странице.
- Управление задачами внутри каждого лида (создание и переключение статуса выполнено/не выполнено).
- Валидация данных через FormRequests (минимальная длина имени, телефона и заголовка задачи).

## Установка

1. Клонируйте репозиторий:
```bash
git clone <ссылка_на_ваш_репозиторий>
cd testproject
```
## Установите зависимости:
```bash
composer install
npm install && npm run build
```
## Настройте конфигурацию:

```bash
cp .env.example .env
```

## Настройте подключение к базе данных в файле .env:

Сгенерируйте ключ приложения:

```Bash
php artisan key:generate
```
## Запустите миграции и наполните базу тестовыми данными:
```Bash
php artisan migrate --seed
```
**Команды для миграций и сидеров**

Запуск миграций с сидерами:
```Bash
php artisan migrate --seed
php artisan migrate:fresh --seed
php artisan optimize:clear
```
## Тестовые учетные данные**

После выполнения сидеров в системе доступны два аккаунта для проверки изоляции данных:**

**Пользователь 1:**
```Bash
Login: admin1@test.com
Password: password
```

**Пользователь 2:**
```Bash
Login: admin2@test.com
Password: password
```
## Каждому пользователю автоматически создается по 10 лидов и распределяется 15 задач.
**Тестирование**

В проекте реализованы Feature-тесты для проверки доступа (Policy) и валидации лидов.

Для запуска тестов используйте:


```Bash
php artisan test
```
